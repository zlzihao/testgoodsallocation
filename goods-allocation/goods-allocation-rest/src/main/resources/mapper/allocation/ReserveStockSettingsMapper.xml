<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.nome.saas.allocation.repository.dao.allocation.ReserveStockSettingsMapper">

    <resultMap type="cn.nome.saas.allocation.repository.entity.allocation.ReserveStockSettingsDO" id="BaseResultMap">
        <id property="id" column="id"/>
        <result property="isEnable" column="is_enable"/>
        <result property="reserveDate" column="reserve_date"/>
        <result property="useSalePredict" column="use_sale_predict"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="lastCalcTime" column="last_calc_time"/>
    </resultMap>

    <sql id="Base_Column_List">
		id, is_enable, reserve_date, use_sale_predict, created_at, updated_at, last_calc_time
	</sql>


    <select id="getLatest" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from reserve_stock_settings
        order by updated_at desc limit 1
    </select>

    <insert id="add"  useGeneratedKeys="true" keyProperty="id"  parameterType="cn.nome.saas.allocation.repository.entity.allocation.ReserveStockSettingsDO" >
        insert into reserve_stock_settings
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                id,
            </if>
            <if test="isEnable != null" >
                is_enable,
            </if>
            <if test="reserveDate != null" >
                reserve_date,
            </if>
            <if test="useSalePredict != null" >
                use_sale_predict,
            </if>
            <if test="createdAt != null" >
                created_at,
            </if>
            <if test="updatedAt != null" >
                updated_at,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                #{id},
            </if>
            <if test="isEnable != null" >
                #{isEnable},
            </if>
            <if test="reserveDate != null" >
                #{reserveDate},
            </if>
            <if test="useSalePredict != null" >
                #{useSalePredict},
            </if>
            <if test="createdAt != null" >
                #{createdAt},
            </if>
            <if test="updatedAt != null" >
                #{updatedAt},
            </if>
        </trim>
    </insert>

    <update id="update" parameterType="cn.nome.saas.allocation.repository.entity.allocation.ReserveStockSettingsDO">
        update reserve_stock_settings
        <set>
            <if test="isEnable != null">
                is_enable = #{isEnable},
            </if>
            <if test="reserveDate != null">
                reserve_date = #{reserveDate},
            </if>
            <if test="useSalePredict != null">
                use_sale_predict = #{useSalePredict},
            </if>
            <if test="createdAt != null">
                created_at = #{createdAt},
            </if>
            <if test="updatedAt != null">
                updated_at = #{updatedAt},
            </if>
            <if test="lastCalcTime != null">
                last_calc_time = #{lastCalcTime},
            </if>
        </set>
        where id = #{id}
    </update>
</mapper>